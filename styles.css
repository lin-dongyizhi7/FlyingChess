*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;padding:0;height:100%;background:#0f1226;color:#f5f6fa;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji}
.app{display:flex;flex-direction:column;min-height:100%}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#14183a;border-bottom:1px solid #252a54}
.brand{font-weight:700}
.controls{display:flex;gap:8px}
.btn{padding:10px 14px;border:none;border-radius:10px;background:#2b2f55;color:#fff;font-size:14px}
.btn.primary{background:#5865f2}
.btn:active{transform:scale(.98)}
select,input{background:#1c2044;border:1px solid #2e356f;color:#fff;border-radius:10px;padding:8px}

.main{display:grid;grid-template-columns:1fr 280px;gap:12px;padding:12px}
@media (max-width:900px){.main{grid-template-columns:1fr}.side{order:-1}}

.board-section{display:flex;align-items:center;justify-content:center}
.board{position:relative;--cell:clamp(24px,7vw,48px);width:100%;max-width:860px;aspect-ratio:1}
.cell{position:absolute;width:var(--cell);height:var(--cell);border-radius:12px;background:#1a1e3a;border:1px solid #2c3260;display:flex;align-items:center;justify-content:center;font-size:12px;color:#9aa0ff;user-select:none;transform:translate(-50%,-50%)}
.cell.sample{width:18px;height:18px;aspect-ratio:auto;display:inline-flex;margin-right:8px}

.cell.start{background:linear-gradient(135deg,#0f5132,#198754)}
.cell.end{background:linear-gradient(135deg,#4c0519,#dc3545)}
.cell.boost{background:linear-gradient(135deg,#0a4275,#0d6efd)}
.cell.back{background:linear-gradient(135deg,#5a1e02,#fd7e14)}
.cell.swap{background:linear-gradient(135deg,#41246d,#6f42c1)}
.cell.jump{background:linear-gradient(135deg,#183153,#20c997)}
.cell.safe{background:linear-gradient(135deg,#2c2f48,#6c757d)}
/* 任务弹窗 */
.modal.hidden{display:none}
.modal{position:fixed;inset:0;z-index:50}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45)}
.modal-panel{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(92vw,460px);background:#15193a;border:1px solid #2a2f60;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.4);padding:14px}
.modal-title{font-weight:700;margin-bottom:6px}
.modal-content{line-height:1.6;white-space:pre-wrap}
.modal .custom-row label{opacity:.85;min-width:96px}
.modal .custom-row input[type="text"]{width:100%}
.cell.selected{outline:2px solid #ffd166}

.piece{position:absolute;width:62%;height:62%;border-radius:50%;border:2px solid rgba(255,255,255,.75)}
.piece.a{background:#ffb3c1;box-shadow:0 0 12px rgba(255,179,193,.6)}
.piece.b{background:#b3e5ff;box-shadow:0 0 12px rgba(179,229,255,.6)}
.piece.duo{inset:auto auto 4px 4px;width:40%;height:40%}

.status{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.dice{width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:#1a1e3a;border:1px solid #2c3260;font-size:18px}

.legend{margin-top:12px}
.legend-title{opacity:.8;margin-bottom:4px}
.legend ul{list-style:none;margin:0;padding:0;display:grid;grid-template-columns:1fr 1fr;gap:6px}

.custom{margin-top:12px;padding:10px;background:#15193a;border:1px solid #2a2f60;border-radius:12px}
.custom.hidden{display:none}
.custom-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.hint{opacity:.7;font-size:12px}

.winner{margin-top:12px;padding:12px;border-radius:12px;background:#1a1e3a;border:1px solid #2c3260;font-size:16px}
.winner.hidden{display:none}


